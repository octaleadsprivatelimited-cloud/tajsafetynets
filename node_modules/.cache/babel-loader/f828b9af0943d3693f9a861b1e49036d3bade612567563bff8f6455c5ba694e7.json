{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\bheemesh\\\\Steel-Invisible-grills\\\\src\\\\components\\\\SafeImage.tsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport { loadImage } from '../utils/imageLoader';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst SafeImage = ({\n  src,\n  alt,\n  className = '',\n  style = {},\n  fallback = '/images/safety-nets/balcony-safety-nets-1.webp',\n  onError\n}) => {\n  _s();\n  const [currentSrc, setCurrentSrc] = useState(src);\n  const [hasError, setHasError] = useState(false);\n  const [isLoading, setIsLoading] = useState(true);\n  useEffect(() => {\n    setCurrentSrc(src);\n    setHasError(false);\n    setIsLoading(true);\n\n    // Try to load the image with our loader\n    loadImage(src).then(loadedSrc => {\n      setCurrentSrc(loadedSrc);\n      setIsLoading(false);\n    }).catch(() => {\n      setHasError(true);\n      setCurrentSrc(fallback);\n      setIsLoading(false);\n      onError === null || onError === void 0 ? void 0 : onError();\n    });\n  }, [src, fallback, onError]);\n  const handleError = () => {\n    if (!hasError) {\n      setHasError(true);\n      setCurrentSrc(fallback);\n      setIsLoading(false);\n      onError === null || onError === void 0 ? void 0 : onError();\n    }\n  };\n  if (isLoading) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: `${className} bg-gray-200 animate-pulse flex items-center justify-center`,\n      style: style,\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"text-gray-400 text-sm\",\n        children: \"Loading...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 59,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 7\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(\"img\", {\n    src: currentSrc,\n    alt: alt,\n    className: className,\n    style: style,\n    onError: handleError,\n    loading: \"lazy\",\n    onLoad: () => {\n      setHasError(false);\n      setIsLoading(false);\n    }\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 65,\n    columnNumber: 5\n  }, this);\n};\n_s(SafeImage, \"YEGpF5JT++HGOZO4PMwVV1gef04=\");\n_c = SafeImage;\nexport default SafeImage;\nvar _c;\n$RefreshReg$(_c, \"SafeImage\");","map":{"version":3,"names":["React","useState","useEffect","loadImage","jsxDEV","_jsxDEV","SafeImage","src","alt","className","style","fallback","onError","_s","currentSrc","setCurrentSrc","hasError","setHasError","isLoading","setIsLoading","then","loadedSrc","catch","handleError","children","fileName","_jsxFileName","lineNumber","columnNumber","loading","onLoad","_c","$RefreshReg$"],"sources":["C:/Users/bheemesh/Steel-Invisible-grills/src/components/SafeImage.tsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { loadImage, getImagePath } from '../utils/imageLoader';\r\n\r\ninterface SafeImageProps {\r\n  src: string;\r\n  alt: string;\r\n  className?: string;\r\n  style?: React.CSSProperties;\r\n  fallback?: string;\r\n  onError?: () => void;\r\n}\r\n\r\nconst SafeImage: React.FC<SafeImageProps> = ({ \r\n  src, \r\n  alt, \r\n  className = '', \r\n  style = {},\r\n  fallback = '/images/safety-nets/balcony-safety-nets-1.webp',\r\n  onError\r\n}) => {\r\n  const [currentSrc, setCurrentSrc] = useState(src);\r\n  const [hasError, setHasError] = useState(false);\r\n  const [isLoading, setIsLoading] = useState(true);\r\n\r\n  useEffect(() => {\r\n    setCurrentSrc(src);\r\n    setHasError(false);\r\n    setIsLoading(true);\r\n    \r\n    // Try to load the image with our loader\r\n    loadImage(src)\r\n      .then((loadedSrc) => {\r\n        setCurrentSrc(loadedSrc);\r\n        setIsLoading(false);\r\n      })\r\n      .catch(() => {\r\n        setHasError(true);\r\n        setCurrentSrc(fallback);\r\n        setIsLoading(false);\r\n        onError?.();\r\n      });\r\n  }, [src, fallback, onError]);\r\n\r\n  const handleError = () => {\r\n    if (!hasError) {\r\n      setHasError(true);\r\n      setCurrentSrc(fallback);\r\n      setIsLoading(false);\r\n      onError?.();\r\n    }\r\n  };\r\n\r\n  if (isLoading) {\r\n    return (\r\n      <div \r\n        className={`${className} bg-gray-200 animate-pulse flex items-center justify-center`}\r\n        style={style}\r\n      >\r\n        <div className=\"text-gray-400 text-sm\">Loading...</div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <img\r\n      src={currentSrc}\r\n      alt={alt}\r\n      className={className}\r\n      style={style}\r\n      onError={handleError}\r\n      loading=\"lazy\"\r\n      onLoad={() => {\r\n        setHasError(false);\r\n        setIsLoading(false);\r\n      }}\r\n    />\r\n  );\r\n};\r\n\r\nexport default SafeImage;\r\n"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,QAAQ,EAAEC,SAAS,QAAQ,OAAO;AAClD,SAASC,SAAS,QAAsB,sBAAsB;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAW/D,MAAMC,SAAmC,GAAGA,CAAC;EAC3CC,GAAG;EACHC,GAAG;EACHC,SAAS,GAAG,EAAE;EACdC,KAAK,GAAG,CAAC,CAAC;EACVC,QAAQ,GAAG,gDAAgD;EAC3DC;AACF,CAAC,KAAK;EAAAC,EAAA;EACJ,MAAM,CAACC,UAAU,EAAEC,aAAa,CAAC,GAAGd,QAAQ,CAACM,GAAG,CAAC;EACjD,MAAM,CAACS,QAAQ,EAAEC,WAAW,CAAC,GAAGhB,QAAQ,CAAC,KAAK,CAAC;EAC/C,MAAM,CAACiB,SAAS,EAAEC,YAAY,CAAC,GAAGlB,QAAQ,CAAC,IAAI,CAAC;EAEhDC,SAAS,CAAC,MAAM;IACda,aAAa,CAACR,GAAG,CAAC;IAClBU,WAAW,CAAC,KAAK,CAAC;IAClBE,YAAY,CAAC,IAAI,CAAC;;IAElB;IACAhB,SAAS,CAACI,GAAG,CAAC,CACXa,IAAI,CAAEC,SAAS,IAAK;MACnBN,aAAa,CAACM,SAAS,CAAC;MACxBF,YAAY,CAAC,KAAK,CAAC;IACrB,CAAC,CAAC,CACDG,KAAK,CAAC,MAAM;MACXL,WAAW,CAAC,IAAI,CAAC;MACjBF,aAAa,CAACJ,QAAQ,CAAC;MACvBQ,YAAY,CAAC,KAAK,CAAC;MACnBP,OAAO,aAAPA,OAAO,uBAAPA,OAAO,CAAG,CAAC;IACb,CAAC,CAAC;EACN,CAAC,EAAE,CAACL,GAAG,EAAEI,QAAQ,EAAEC,OAAO,CAAC,CAAC;EAE5B,MAAMW,WAAW,GAAGA,CAAA,KAAM;IACxB,IAAI,CAACP,QAAQ,EAAE;MACbC,WAAW,CAAC,IAAI,CAAC;MACjBF,aAAa,CAACJ,QAAQ,CAAC;MACvBQ,YAAY,CAAC,KAAK,CAAC;MACnBP,OAAO,aAAPA,OAAO,uBAAPA,OAAO,CAAG,CAAC;IACb;EACF,CAAC;EAED,IAAIM,SAAS,EAAE;IACb,oBACEb,OAAA;MACEI,SAAS,EAAE,GAAGA,SAAS,6DAA8D;MACrFC,KAAK,EAAEA,KAAM;MAAAc,QAAA,eAEbnB,OAAA;QAAKI,SAAS,EAAC,uBAAuB;QAAAe,QAAA,EAAC;MAAU;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAK;IAAC;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACpD,CAAC;EAEV;EAEA,oBACEvB,OAAA;IACEE,GAAG,EAAEO,UAAW;IAChBN,GAAG,EAAEA,GAAI;IACTC,SAAS,EAAEA,SAAU;IACrBC,KAAK,EAAEA,KAAM;IACbE,OAAO,EAAEW,WAAY;IACrBM,OAAO,EAAC,MAAM;IACdC,MAAM,EAAEA,CAAA,KAAM;MACZb,WAAW,CAAC,KAAK,CAAC;MAClBE,YAAY,CAAC,KAAK,CAAC;IACrB;EAAE;IAAAM,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACH,CAAC;AAEN,CAAC;AAACf,EAAA,CAjEIP,SAAmC;AAAAyB,EAAA,GAAnCzB,SAAmC;AAmEzC,eAAeA,SAAS;AAAC,IAAAyB,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}